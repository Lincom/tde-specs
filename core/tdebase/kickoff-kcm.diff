--- menutab_impl.h		(revision 755866)
+++ menutab_impl.h		(revision 774645)
@@ -62,6 +62,7 @@ signals:
 
 public slots:
     void launchMenuEditor();
+    void menuStyleChanged();
 
 protected:
     kSubMenuItem *m_bookmarkMenu;
--- kicker_config_hiding.desktop		(revision 755866)
+++ kicker_config_hiding.desktop		(revision 774645)
@@ -146,7 +146,7 @@ Keywords[csb]=kicker,panel,kpanel,lÃ«stÃ
 Keywords[cy]=ciciwr,kicker,panel,kpanel,bar tasgau,bar cychwyn,bar lansio,lleoliad,maint,awto-guddio,hunan-guddio,cuddio,botymau,animeiddiad,cefndir,themÃ¢u,storfa dewislen, storfa,cache,celc,cudd,K-Menu,nodau tudalen,dogfenni diweddar,porydd cyflym,dewislen porydd,dewislen,eiconau,teiliau,rhaglenigion,ymcychwyn,amlygu,carnau,eiconau chwyddo
 Keywords[da]=kicker,panel,kpanel,opgavelinje,startlinje,sted,stÃ¸rrelse,autogem,gem,knapper,animering,baggrund,temaer,menucache,cache,skjult,K-Menu,bogmÃ¦rker,nylige dokumenter,hurtigsÃ¸ger,sÃ¸gemenu,menu,ikoner,fliser,panelprogrammer,opstart,markÃ©r,hÃ¥ndterer,ikoner
 Keywords[de]=Kicker,Panel,Taskbar,Kontrollleiste,Startleiste,Klickstartleiste,Fensterleiste,Autom. ausblenden,Ausblenden, KnÃ¶pfe,Animation,HintergrÃ¼nde,Stile,Design,Themes,MenÃ¼-Zwischenspeicher, K-MenÃ¼,Zwischenspeicher,Lesezeichen,Zuletzt geÃ¶ffnete Dateien, Schnellanzeiger,MenÃ¼s,Symbole,Icons,Kacheln,Applets,Miniprogramme, Java-Miniprogramme,Hervorhebung,Anfasser,Sicherheitsstufen,Zoom fÃ¼r Symbole
-Keywords[el]=kicker,Ï€Î¯Î½Î±ÎºÎ±Ï‚,kpanel,Î³ÏÎ±Î¼Î¼Î® ÎµÏÎ³Î±ÏƒÎ¹ÏÎ½,Î³ÏÎ±Î¼Î¼Î® Î­Î½Î±ÏÎ¾Î·Ï‚,Î³ÏÎ±Î¼Î¼Î® ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·Ï‚,Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±,Î¼Î­Î³ÎµÎ¸Î¿Ï‚,Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€ÏŒÎºÏÏ…ÏˆÎ·,Î±Ï€ÏŒÎºÏÏ…ÏˆÎ·,ÎºÎ¿Ï…Î¼Ï€Î¹Î¬,ÎµÏ†Î­ ÎºÎ¯Î½Î·ÏƒÎ·Ï‚,Ï†ÏŒÎ½Ï„Î¿,Î¸Î­Î¼Î±Ï„Î±,Î»Î±Î½Î¸Î¬Î½Î¿Ï…ÏƒÎ± Î¼Î½Î®Î¼Î· Î¼ÎµÎ½Î¿Ï,Î»Î±Î½Î¸Î¬Î½Î¿Ï…ÏƒÎ± Î¼Î½Î®Î¼Î·,ÎºÏÏ…Ï†ÏŒ, K-ÎœÎµÎ½Î¿Ï,ÏƒÎµÎ»Î¹Î´Î¿Î´ÎµÎ¯ÎºÏ„ÎµÏ‚,Ï€ÏÏŒÏƒÏ†Î±Ï„Î± Î­Î³Î³ÏÎ±Ï†Î±,Î³ÏÎ®Î³Î¿ÏÎ¿Ï‚ ÎµÎ¾ÎµÏÎµÏ…Î½Î·Ï„Î®Ï‚,Î¼ÎµÎ½Î¿Ï ÎµÎ¾ÎµÏÎµÏ…Î½Î·Ï„Î®,Î¼ÎµÎ½Î¿Ï,ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î±,tiles,Î¼Î¹ÎºÏÎ¿ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚,Î­Î½Î±ÏÎ¾Î·,Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚,Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î®ÏÎ¹Î±, Î¼ÎµÎ³Î­Î¸Ï…Î½ÏƒÎ· ÎµÎ¹ÎºÎ¿Î½Î¹Î´Î¯Ï‰Î½
+Keywords[el]=kicker,Ï€Î¯Î½Î±ÎºÎ±Ï‚,kpanel,Î³ÏÎ±Î¼Î¼Î® ÎµÏÎ³Î±ÏƒÎ¹ÏÎ½,Î³ÏÎ±Î¼Î¼Î® Î­Î½Î±ÏÎ¾Î·Ï‚,Î³ÏÎ±Î¼Î¼Î® ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·Ï‚,Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±,Î¼Î­Î³ÎµÎ¸Î¿Ï‚,Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€ÏŒÎºÏÏ…ÏˆÎ·,Î±Ï€ÏŒÎºÏÏ…ÏˆÎ·,ÎºÎ¿Ï…Î¼Ï€Î¹Î¬,ÎµÏ†Î­ ÎºÎ¯Î½Î·ÏƒÎ·Ï‚,Ï†ÏŒÎ½Ï„Î¿,Î¸Î­Î¼Î±Ï„Î±,Î»Î±Î½Î¸Î¬Î½Î¿Ï…ÏƒÎ± Î¼Î½Î®Î¼Î· Î¼ÎµÎ½Î¿Ï,Î»Î±Î½Î¸Î¬Î½Î¿Ï…ÏƒÎ± Î¼Î½Î®Î¼Î·,ÎºÏÏ…Ï†ÏŒ, K-ÎœÎµÎ½Î¿Ï,ÏƒÎµÎ»Î¹Î´Î¿Î´ÎµÎ¯ÎºÏ„ÎµÏ‚,Ï€ÏÏŒÏƒÏ†Î±Ï„Î± Î­Î³Î³ÏÎ±Ï†Î±,Î³ÏÎ®Î³Î¿ÏÎ¿Ï‚ ÎµÎ¾ÎµÏÎµÏ…Î½Î·Ï„Î®Ï‚,Î¼ÎµÎ½Î¿Ï ÎµÎ¾ÎµÏÎµÏ…Î½Î·Ï„Î®,Î¼ÎµÎ½Î¿Ï,ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î±,tiles,ÎµÏ†Î±ÏÎ¼Î¿Î³Î¯Î´Î¹Î±,Î­Î½Î±ÏÎ¾Î·,Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚,Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î®ÏÎ¹Î±, Î¼ÎµÎ³Î­Î¸Ï…Î½ÏƒÎ· ÎµÎ¹ÎºÎ¿Î½Î¹Î´Î¯Ï‰Î½
 Keywords[eo]=lanÄ‰ilo,panelo,tasklistelo,situo,grandeco,aÅ­tokaÅo,kaÅo,butono,fono,etoso,menubufro,K-Menuo,legosigno,lasta dokumento,rapidrigardilo,rigardmenuo,piktogramo,kahelo,aplikaÄµo,lanÄ‰o,emfazo,teniloj,pligrandigo,fidindaj aplikaÄµetoj,sekurecnivelo
 Keywords[es]=kicker,panel,kpanel,barra de tareas,barra de inicio,barra de lanzamiento,direcciÃ³n,tamaÃ±o,auto ocultar,ocultar,botones,animaciÃ³n,fondo,temas,cachÃ© de menÃº,cachÃ©,oculto,MenÃº K,marcadores,documentos recientes,navegador rÃ¡pido,menÃº navegador,menÃº,iconos,mosaicos,miniaplicaciones,arranque,resaltado,asas,iconos ampliados
 Keywords[et]=kicker,paneel,kpanel,tegumiriba,kÃ¤ivitusriba,asukoht,suurus,terminal,automaatne peitmine,peitmine,nupud,animatsioon,taust,teemad,menÃ¼Ã¼ vahemÃ¤lu,vahemÃ¤lu,peidetud,K-menÃ¼Ã¼,jÃ¤rjehoidjad,viimati kasutatud dokumendid, kiirbrauser,lehitsemise menÃ¼Ã¼,menÃ¼Ã¼,ikoonid,apletid,kÃ¤ivitamine,esiletÃµstmine,piirded,ikoonide suurendamine,usaldusvÃ¤Ã¤rsed apletid,turvatase
--- menutab_impl.cpp		(revision 755866)
+++ menutab_impl.cpp		(revision 774645)
@@ -16,12 +16,16 @@
  */
 
 #include <qcheckbox.h>
+#include <qgroupbox.h>
 #include <qdir.h>
 #include <qlabel.h>
 #include <qlayout.h>
 #include <qpushbutton.h>
 #include <qradiobutton.h>
+#include <qcombobox.h>
+#include <qbuttongroup.h>
 
+#include <dcopref.h>
 #include <kapplication.h>
 #include <kdebug.h>
 #include <kdesktopfile.h>
@@ -123,12 +127,41 @@ void MenuTab::load( bool useDefaults )
         }
     }
 
+    c->setGroup("General");
+    m_comboMenuStyle->setCurrentItem( c->readBoolEntry("LegacyKMenu", false) ? 1 : 0 );
+    m_openOnHover->setChecked( c->readBoolEntry("OpenOnHover", true) );
+    menuStyleChanged();
+
+    connect(m_comboMenuStyle, SIGNAL(activated(int)), SIGNAL(changed()));
+    connect(m_comboMenuStyle, SIGNAL(activated(int)), SLOT(menuStyleChanged()));
+    connect(m_openOnHover, SIGNAL(clicked()), SIGNAL(changed()));
+
     m_showFrequent->setChecked(true);
 
     if ( useDefaults )
        emit changed();
 }
 
+void MenuTab::menuStyleChanged()
+{
+    if (m_comboMenuStyle->currentItem()==1) {
+       m_openOnHover->setEnabled(false);
+       m_subMenus->setEnabled(true);
+       kcfg_UseSidePixmap->setEnabled(true);
+       kcfg_MenuEntryFormat->setEnabled(true);
+       kcfg_RecentVsOften->setEnabled(true);
+       m_showFrequent->setEnabled(true);
+    }
+    else {
+       m_openOnHover->setEnabled(true);
+       m_subMenus->setEnabled(false);
+       kcfg_UseSidePixmap->setEnabled(false);
+       kcfg_MenuEntryFormat->setEnabled(false);
+       kcfg_RecentVsOften->setEnabled(false);
+       m_showFrequent->setEnabled(false);
+    }
+}
+
 void MenuTab::save()
 {
     KSharedConfig::Ptr c = KSharedConfig::openConfig(KickerConfig::the()->configName());
@@ -154,8 +187,17 @@ void MenuTab::save()
         }
     }
     c->writeEntry("Extensions", ext);
+    c->setGroup("General");
 
+    bool kmenusetting = m_comboMenuStyle->currentItem()==1;
+    bool oldkmenusetting = c->readBoolEntry("LegacyKMenu", false);
+
+    c->writeEntry("LegacyKMenu", kmenusetting);
+    c->writeEntry("OpenOnHover", m_openOnHover->isChecked());
     c->sync();
+
+    if (kmenusetting != oldkmenusetting)
+        DCOPRef ("kicker", "default").call("restart()");
 }
 
 void MenuTab::defaults()
--- menutab.ui		(revision 755866)
+++ menutab.ui		(revision 774645)
@@ -8,8 +8,8 @@
         <rect>
             <x>0</x>
             <y>0</y>
-            <width>410</width>
-            <height>437</height>
+            <width>923</width>
+            <height>649</height>
         </rect>
     </property>
     <vbox>
@@ -19,6 +19,59 @@
         <property name="margin">
             <number>0</number>
         </property>
+        <widget class="QLayoutWidget">
+            <property name="name">
+                <cstring>layout5</cstring>
+            </property>
+            <hbox>
+                <property name="name">
+                    <cstring>unnamed</cstring>
+                </property>
+                <widget class="QLabel">
+                    <property name="name">
+                        <cstring>textLabel1</cstring>
+                    </property>
+                    <property name="text">
+                        <string>Start menu style:</string>
+                    </property>
+                    <property name="buddy" stdset="0">
+                        <cstring>comboMenuStyle</cstring>
+                    </property>
+                </widget>
+                <widget class="QComboBox">
+                    <item>
+                        <property name="text">
+                            <string>SUSE</string>
+                        </property>
+                    </item>
+                    <item>
+                        <property name="text">
+                            <string>KDE</string>
+                        </property>
+                    </item>
+                    <property name="name">
+                        <cstring>m_comboMenuStyle</cstring>
+                    </property>
+                </widget>
+                <spacer>
+                    <property name="name">
+                        <cstring>spacer4</cstring>
+                    </property>
+                    <property name="orientation">
+                        <enum>Horizontal</enum>
+                    </property>
+                    <property name="sizeType">
+                        <enum>Expanding</enum>
+                    </property>
+                    <property name="sizeHint">
+                        <size>
+                            <width>40</width>
+                            <height>20</height>
+                        </size>
+                    </property>
+                </spacer>
+            </hbox>
+        </widget>
         <widget class="QGroupBox">
             <property name="name">
                 <cstring>m_kmenuGroup</cstring>
@@ -38,6 +91,14 @@
                         <property name="name">
                             <cstring>unnamed</cstring>
                         </property>
+                <widget class="QCheckBox" row="0" column="0">
+                    <property name="name">
+                        <cstring>m_openOnHover</cstring>
+                    </property>
+                    <property name="text">
+                        <string>Open menu on mouse hover</string>
+                    </property>
+                </widget>
                         <widget class="QButtonGroup">
                             <property name="name">
                                 <cstring>kcfg_MenuEntryFormat</cstring>
@@ -377,6 +438,8 @@
         </widget>
     </vbox>
 </widget>
+<customwidgets>
+</customwidgets>
 <tabstops>
     <tabstop>m_formatSimple</tabstop>
     <tabstop>m_formatNameDesc</tabstop>
@@ -400,8 +463,5 @@
 <includehints>
     <includehint>klistview.h</includehint>
     <includehint>knuminput.h</includehint>
-    <includehint>knuminput.h</includehint>
-    <includehint>knuminput.h</includehint>
-    <includehint>knuminput.h</includehint>
 </includehints>
 </UI>
--- kicker_config_menus.desktop		(revision 755866)
+++ kicker_config_menus.desktop		(revision 774645)
@@ -143,7 +143,7 @@ Keywords[csb]=kicker,panel,kpanel,lÃ«stÃ
 Keywords[cy]=ciciwr,kicker,panel,kpanel,bar tasgau,bar cychwyn,bar lansio,lleoliad,maint,awto-guddio,hunan-guddio,cuddio,botymau,animeiddiad,cefndir,themÃ¢u,storfa dewislen, storfa,cache,celc,cudd,K-Menu,nodau tudalen,dogfenni diweddar,porydd cyflym,dewislen porydd,dewislen,eiconau,teiliau,rhaglenigion,ymcychwyn,amlygu,carnau,eiconau chwyddo
 Keywords[da]=kicker,panel,kpanel,opgavelinje,startlinje,sted,stÃ¸rrelse,autogem,gem,knapper,animering,baggrund,temaer,menucache,cache,skjult,K-Menu,bogmÃ¦rker,nylige dokumenter,hurtigsÃ¸ger,sÃ¸gemenu,menu,ikoner,fliser,panelprogrammer,opstart,markÃ©r,hÃ¥ndterer,ikoner
 Keywords[de]=Kicker,Panel,Taskbar,Kontrollleiste,Startleiste,Klickstartleiste,Fensterleiste,Autom. ausblenden,Ausblenden, KnÃ¶pfe,Animation,HintergrÃ¼nde,Stile,Design,Themes,MenÃ¼-Zwischenspeicher, K-MenÃ¼,Zwischenspeicher,Lesezeichen,Zuletzt geÃ¶ffnete Dateien, Schnellanzeiger,MenÃ¼s,Symbole,Icons,Kacheln,Applets,Miniprogramme, Java-Miniprogramme,Hervorhebung,Anfasser,Sicherheitsstufen,Zoom fÃ¼r Symbole
-Keywords[el]=kicker,Ï€Î¯Î½Î±ÎºÎ±Ï‚,kpanel,Î³ÏÎ±Î¼Î¼Î® ÎµÏÎ³Î±ÏƒÎ¹ÏÎ½,Î³ÏÎ±Î¼Î¼Î® Î­Î½Î±ÏÎ¾Î·Ï‚,Î³ÏÎ±Î¼Î¼Î® ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·Ï‚,Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±,Î¼Î­Î³ÎµÎ¸Î¿Ï‚,Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€ÏŒÎºÏÏ…ÏˆÎ·,Î±Ï€ÏŒÎºÏÏ…ÏˆÎ·,ÎºÎ¿Ï…Î¼Ï€Î¹Î¬,ÎµÏ†Î­ ÎºÎ¯Î½Î·ÏƒÎ·Ï‚,Ï†ÏŒÎ½Ï„Î¿,Î¸Î­Î¼Î±Ï„Î±,Î»Î±Î½Î¸Î¬Î½Î¿Ï…ÏƒÎ± Î¼Î½Î®Î¼Î· Î¼ÎµÎ½Î¿Ï,Î»Î±Î½Î¸Î¬Î½Î¿Ï…ÏƒÎ± Î¼Î½Î®Î¼Î·,ÎºÏÏ…Ï†ÏŒ, K-ÎœÎµÎ½Î¿Ï,ÏƒÎµÎ»Î¹Î´Î¿Î´ÎµÎ¯ÎºÏ„ÎµÏ‚,Ï€ÏÏŒÏƒÏ†Î±Ï„Î± Î­Î³Î³ÏÎ±Ï†Î±,Î³ÏÎ®Î³Î¿ÏÎ¿Ï‚ ÎµÎ¾ÎµÏÎµÏ…Î½Î·Ï„Î®Ï‚,Î¼ÎµÎ½Î¿Ï ÎµÎ¾ÎµÏÎµÏ…Î½Î·Ï„Î®,Î¼ÎµÎ½Î¿Ï,ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î±,tiles,Î¼Î¹ÎºÏÎ¿ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚,Î­Î½Î±ÏÎ¾Î·,Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚,Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î®ÏÎ¹Î±, Î¼ÎµÎ³Î­Î¸Ï…Î½ÏƒÎ· ÎµÎ¹ÎºÎ¿Î½Î¹Î´Î¯Ï‰Î½
+Keywords[el]=kicker,Ï€Î¯Î½Î±ÎºÎ±Ï‚,kpanel,Î³ÏÎ±Î¼Î¼Î® ÎµÏÎ³Î±ÏƒÎ¹ÏÎ½,Î³ÏÎ±Î¼Î¼Î® Î­Î½Î±ÏÎ¾Î·Ï‚,Î³ÏÎ±Î¼Î¼Î® ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·Ï‚,Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±,Î¼Î­Î³ÎµÎ¸Î¿Ï‚,Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€ÏŒÎºÏÏ…ÏˆÎ·,Î±Ï€ÏŒÎºÏÏ…ÏˆÎ·,ÎºÎ¿Ï…Î¼Ï€Î¹Î¬,ÎµÏ†Î­ ÎºÎ¯Î½Î·ÏƒÎ·Ï‚,Ï†ÏŒÎ½Ï„Î¿,Î¸Î­Î¼Î±Ï„Î±,Î»Î±Î½Î¸Î¬Î½Î¿Ï…ÏƒÎ± Î¼Î½Î®Î¼Î· Î¼ÎµÎ½Î¿Ï,Î»Î±Î½Î¸Î¬Î½Î¿Ï…ÏƒÎ± Î¼Î½Î®Î¼Î·,ÎºÏÏ…Ï†ÏŒ, K-ÎœÎµÎ½Î¿Ï,ÏƒÎµÎ»Î¹Î´Î¿Î´ÎµÎ¯ÎºÏ„ÎµÏ‚,Ï€ÏÏŒÏƒÏ†Î±Ï„Î± Î­Î³Î³ÏÎ±Ï†Î±,Î³ÏÎ®Î³Î¿ÏÎ¿Ï‚ ÎµÎ¾ÎµÏÎµÏ…Î½Î·Ï„Î®Ï‚,Î¼ÎµÎ½Î¿Ï ÎµÎ¾ÎµÏÎµÏ…Î½Î·Ï„Î®,Î¼ÎµÎ½Î¿Ï,ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î±,tiles,ÎµÏ†Î±ÏÎ¼Î¿Î³Î¯Î´Î¹Î±,Î­Î½Î±ÏÎ¾Î·,Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚,Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î®ÏÎ¹Î±, Î¼ÎµÎ³Î­Î¸Ï…Î½ÏƒÎ· ÎµÎ¹ÎºÎ¿Î½Î¹Î´Î¯Ï‰Î½
 Keywords[eo]=lanÄ‰ilo,panelo,tasklistelo,situo,grandeco,aÅ­tokaÅo,kaÅo,butono,fono,etoso,menubufro,K-Menuo,legosigno,lasta dokumento,rapidrigardilo,rigardmenuo,piktogramo,kahelo,aplikaÄµo,lanÄ‰o,emfazo,teniloj,pligrandigo,fidindaj aplikaÄµetoj,sekurecnivelo
 Keywords[es]=kicker,panel,kpanel,barra de tareas,barra de inicio,barra de lanzamiento,direcciÃ³n,tamaÃ±o,auto ocultar,ocultar,botones,animaciÃ³n,fondo,temas,cachÃ© de menÃº,cachÃ©,oculto,MenÃº K,marcadores,documentos recientes,navegador rÃ¡pido,menÃº navegador,menÃº,iconos,mosaicos,miniaplicaciones,arranque,resaltado,asas,iconos ampliados
 Keywords[et]=kicker,paneel,kpanel,tegumiriba,kÃ¤ivitusriba,asukoht,suurus,terminal,automaatne peitmine,peitmine,nupud,animatsioon,taust,teemad,menÃ¼Ã¼ vahemÃ¤lu,vahemÃ¤lu,peidetud,K-menÃ¼Ã¼,jÃ¤rjehoidjad,viimati kasutatud dokumendid, kiirbrauser,lehitsemise menÃ¼Ã¼,menÃ¼Ã¼,ikoonid,apletid,kÃ¤ivitamine,esiletÃµstmine,piirded,ikoonide suurendamine,usaldusvÃ¤Ã¤rsed apletid,turvatase
